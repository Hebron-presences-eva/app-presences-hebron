
<!DOCTYPE html>
<html lang="fr">
<head>

<!-- Liens pour PWA -->
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" type="image/png" href="/icons/icon-192x192.png">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">


<!-- Meta tags pour PWA -->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="theme-color" content="#4f46e5">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="H√©bron">
<meta name="msapplication-TileColor" content="#4f46e5">
<meta name="msapplication-tap-highlight" content="no">

<!-- Fin Meta tags pour PWA -->


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feuille de Pr√©sence - Redirection</title>


<!-- Script d'installation PWA √† ajouter avant la fermeture de </body> -->
<script>
// Enregistrement du Service Worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then((registration) => {
        console.log('Service Worker enregistr√© avec succ√®s:', registration.scope);
        
        // V√©rifier les mises √† jour
        registration.addEventListener('updatefound', () => {
          const newWorker = registration.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              // Nouvelle version disponible
              if (confirm('Une nouvelle version est disponible. Voulez-vous recharger ?')) {
                window.location.reload();
              }
            }
          });
        });
      })
      .catch((error) => {
        console.log('√âchec de l\'enregistrement du Service Worker:', error);
      });
  });
}

// Gestion de l'installation PWA
let deferredPrompt;
const installButton = document.createElement('button');
installButton.textContent = 'üì± Installer l\'app';
installButton.style.cssText = `
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #4f46e5;
  color: white;
  border: none;
  padding: 12px 16px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  display: none;
  z-index: 1000;
  transition: all 0.3s ease;
`;

installButton.addEventListener('mouseover', () => {
  installButton.style.transform = 'translateY(-2px)';
  installButton.style.boxShadow = '0 6px 16px rgba(79, 70, 229, 0.4)';
});

installButton.addEventListener('mouseout', () => {
  installButton.style.transform = 'translateY(0)';
  installButton.style.boxShadow = '0 4px 12px rgba(79, 70, 229, 0.3)';
});

document.body.appendChild(installButton);

// √âcouter l'√©v√©nement beforeinstallprompt
window.addEventListener('beforeinstallprompt', (e) => {
  // Emp√™cher l'affichage automatique
  e.preventDefault();
  deferredPrompt = e;
  
  // Afficher notre bouton personnalis√©
  installButton.style.display = 'block';
});

// Gestion du clic sur le bouton d'installation
installButton.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  
  // Afficher le prompt d'installation
  deferredPrompt.prompt();
  
  // Attendre le choix de l'utilisateur
  const { outcome } = await deferredPrompt.userChoice;
  
  if (outcome === 'accepted') {
    console.log('L\'utilisateur a accept√© l\'installation');
  } else {
    console.log('L\'utilisateur a refus√© l\'installation');
  }
  
  // R√©initialiser deferredPrompt
  deferredPrompt = null;
  installButton.style.display = 'none';
});

// Masquer le bouton apr√®s installation
window.addEventListener('appinstalled', () => {
  console.log('PWA install√©e avec succ√®s');
  installButton.style.display = 'none';
  deferredPrompt = null;
});

// D√©tection du mode standalone (app install√©e)
if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('Application lanc√©e en mode standalone');
  installButton.style.display = 'none';
}
</script>

<!-- Fin pour Script d'installation PWA √† ajouter avant la fermeture de </body> -->

    <script>
        // Redirection automatique vers la page de login
        window.location.href = 'login.html';
    </script>
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
        <div style="text-align: center;">
            <h2>Redirection vers la page de connexion...</h2>
            <p>Si vous n'√™tes pas redirig√© automatiquement, <a href="login.html">cliquez ici</a></p>
        </div>
    </div>
</body>
</html>